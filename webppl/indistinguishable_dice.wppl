/*
  
  From MIT 6.262 Discrete Stochastic Processes
  2. More Review; The Bernoulli Process
  https://www.youtube.com/watch?v=d4xfax4_Iww&list=PLEEF5322B331C1B98&index=2

  """
  Trivial example: Roll a white die and a red die.
  There are 36 sample outcomes, (i, j), 1 ≤ i, j ≤ 6,
  taken as equiprobable by symmetry.
  
  Roll 2 indistinguishable white dice. The white and
  red outcomes (i, j) and (j, i) for i =
  j are now indistinguishable. There are now 21 ‘ﬁnest grain’
  outcomes, but no sane person would use these as
  sample points.
  """

  So we have two indistinguishable dice where (i,j) = (j,i). 
  Which we represents as a condition that i<=j.
  There are 21 possible outcomes.
  What are the probabilities of the sums?

  Marginal:
    {"d1":1,"d2":1,"t":2} : 0.047619047619047616
    {"d1":1,"d2":2,"t":3} : 0.047619047619047616
    {"d1":1,"d2":3,"t":4} : 0.047619047619047616
    {"d1":1,"d2":4,"t":5} : 0.047619047619047616
    {"d1":1,"d2":5,"t":6} : 0.047619047619047616
    {"d1":1,"d2":6,"t":7} : 0.047619047619047616
    {"d1":2,"d2":2,"t":4} : 0.047619047619047616
    {"d1":2,"d2":3,"t":5} : 0.047619047619047616
    {"d1":2,"d2":4,"t":6} : 0.047619047619047616
    {"d1":2,"d2":5,"t":7} : 0.047619047619047616
    {"d1":2,"d2":6,"t":8} : 0.047619047619047616
    {"d1":3,"d2":3,"t":6} : 0.047619047619047616
    {"d1":3,"d2":4,"t":7} : 0.047619047619047616
    {"d1":3,"d2":5,"t":8} : 0.047619047619047616
    {"d1":3,"d2":6,"t":9} : 0.047619047619047616
    {"d1":4,"d2":4,"t":8} : 0.047619047619047616
    {"d1":4,"d2":5,"t":9} : 0.047619047619047616
    {"d1":4,"d2":6,"t":10} : 0.047619047619047616
    {"d1":5,"d2":5,"t":10} : 0.047619047619047616
    {"d1":5,"d2":6,"t":11} : 0.047619047619047616
    {"d1":6,"d2":6,"t":12} : 0.047619047619047616

  d1
  Marginal:
    1 : 0.2857142857142857
    2 : 0.23809523809523808
    3 : 0.19047619047619047
    4 : 0.14285714285714288
    5 : 0.09523809523809525
    6 : 0.047619047619047616
  d2
  Marginal:
    6 : 0.28571428571428575
    5 : 0.2380952380952381
    4 : 0.19047619047619052
    3 : 0.1428571428571429
    2 : 0.09523809523809529
    1 : 0.04761904761904764
  t
  Marginal:
    7 : 0.14285714285714288
    6 : 0.14285714285714288
    8 : 0.14285714285714288
    4 : 0.09523809523809525
    5 : 0.09523809523809525
    9 : 0.09523809523809525
    10 : 0.09523809523809525
    3 : 0.047619047619047616
    2 : 0.047619047619047616
    11 : 0.047619047619047616
    12 : 0.047619047619047616

  expectation:
  [ [ 'd1', 2.6666666666666665 ],
    [ 'd2', 4.333333333333334 ],
    [ 't', 7.000000000000001 ] ]

  MAP:
  [ [ 'd1', { val: 1, score: -1.252762968495368 } ],
    [ 'd2', { val: 6, score: -1.2527629684953678 } ],
    [ 't', { val: 6, score: -1.9459101490553132 } ] ]



  Compare with two distinguishable dice:
  Marginal:
    {"d1":1,"d2":1,"t":2} : 0.02777777777777778
    {"d1":1,"d2":2,"t":3} : 0.02777777777777778
    {"d1":1,"d2":3,"t":4} : 0.02777777777777778
    {"d1":1,"d2":4,"t":5} : 0.02777777777777778
    {"d1":1,"d2":5,"t":6} : 0.02777777777777778
    {"d1":1,"d2":6,"t":7} : 0.02777777777777778
    {"d1":2,"d2":1,"t":3} : 0.02777777777777778
    {"d1":2,"d2":2,"t":4} : 0.02777777777777778
    {"d1":2,"d2":3,"t":5} : 0.02777777777777778
    {"d1":2,"d2":4,"t":6} : 0.02777777777777778
    {"d1":2,"d2":5,"t":7} : 0.02777777777777778
    {"d1":2,"d2":6,"t":8} : 0.02777777777777778
    {"d1":3,"d2":1,"t":4} : 0.02777777777777778
    {"d1":3,"d2":2,"t":5} : 0.02777777777777778
    {"d1":3,"d2":3,"t":6} : 0.02777777777777778
    {"d1":3,"d2":4,"t":7} : 0.02777777777777778
    {"d1":3,"d2":5,"t":8} : 0.02777777777777778
    {"d1":3,"d2":6,"t":9} : 0.02777777777777778
    {"d1":4,"d2":1,"t":5} : 0.02777777777777778
    {"d1":4,"d2":2,"t":6} : 0.02777777777777778
    {"d1":4,"d2":3,"t":7} : 0.02777777777777778
    {"d1":4,"d2":4,"t":8} : 0.02777777777777778
    {"d1":4,"d2":5,"t":9} : 0.02777777777777778
    {"d1":4,"d2":6,"t":10} : 0.02777777777777778
    {"d1":5,"d2":1,"t":6} : 0.02777777777777778
    {"d1":5,"d2":4,"t":9} : 0.02777777777777778
    {"d1":5,"d2":5,"t":10} : 0.02777777777777778
    {"d1":5,"d2":6,"t":11} : 0.02777777777777778
    {"d1":6,"d2":1,"t":7} : 0.02777777777777778
    {"d1":6,"d2":2,"t":8} : 0.02777777777777778
    {"d1":6,"d2":3,"t":9} : 0.02777777777777778
    {"d1":6,"d2":4,"t":10} : 0.02777777777777778
    {"d1":6,"d2":5,"t":11} : 0.02777777777777778
    {"d1":6,"d2":6,"t":12} : 0.02777777777777778

  d1
  Marginal:
    1 : 0.16666666666666669
    2 : 0.16666666666666669
    3 : 0.16666666666666669
    4 : 0.16666666666666669
    5 : 0.16666666666666669
    6 : 0.16666666666666669
  d2
  Marginal:
    1 : 0.16666666666666669
    2 : 0.16666666666666669
    3 : 0.16666666666666669
    4 : 0.16666666666666669
    5 : 0.16666666666666669
    6 : 0.16666666666666669
  t
  Marginal:
    7 : 0.16666666666666669
    6 : 0.1388888888888889
    8 : 0.1388888888888889
    5 : 0.11111111111111113
    9 : 0.11111111111111113
    4 : 0.08333333333333337
    10 : 0.08333333333333337
    3 : 0.055555555555555566
    11 : 0.055555555555555566
    2 : 0.02777777777777778
    12 : 0.02777777777777778
  expectation:
  [ [ 'd1', 3.5 ], [ 'd2', 3.5 ], [ 't', 7.000000000000001 ] ]

  MAP:
  [ [ 'd1', { val: 1, score: -1.791759469228055 } ],
    [ 'd2', { val: 1, score: -1.791759469228055 } ],
    [ 't', { val: 7, score: -1.791759469228055 } ] ]


*/

var model = function() {
    var d1 = randomInteger(6)+1
    var d2 = randomInteger(6)+1

    var t = d1+d2
    
    // d1 and d2 are indistinguishable
    // (comment to get traditional distinguishable die throws)
    condition(d1 <= d2) 

    return {
        d1:d1,
        d2:d2,
        t:t,
    }
}

var d = Infer(model)
console.log(d)
exp_map_all(d)

